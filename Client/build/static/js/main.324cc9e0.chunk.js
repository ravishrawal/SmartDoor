(this.webpackJsonpsmartlock=this.webpackJsonpsmartlock||[]).push([[0],{41:function(e,t,n){},42:function(e,t,n){},65:function(e,t,n){"use strict";n.r(t);var s=n(1),a=n(0),i=n.n(a),o=n(17),c=n.n(o),r=(n(41),n(11)),l=n(12),d=n(14),u=n(13),h=(n(42),n(9)),b=(n(33),n(16)),p=n.n(b),j=n.p+"static/media/latchlock.b592f035.jpg",m=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(){var e;return Object(r.a)(this,n),(e=t.call(this)).handleKeydown=function(t){e.setState({passcode:t.target.value})},e.submitHandler=function(t){t.preventDefault();var n=e.state.passcode;console.log("passcode",n),p.a.post("https://f3gii3hkr3.execute-api.us-east-1.amazonaws.com/Dev/passcodes",{passcode:n,faceid:e.state.faceid}).then((function(t){console.log(t.data);var n=t.data.body,s=n.passcode_validation,a=n.visitor_name;e.setState({submitted:!0,passcode_validation:s,visitor_name:a})}))},e.state={passcode:null,submitted:!1,faceid:null,passcode_validation:!1,visitor_name:null},e.submitHandler=e.submitHandler.bind(Object(h.a)(e)),e.handleKeydown=e.handleKeydown.bind(Object(h.a)(e)),e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){console.log("Input Form Mounted!")}},{key:"render",value:function(){var e=this,t=this.props.location.search.slice(1).split("=")[1];return this.state.faceid=t,Object(s.jsxs)("div",{children:[Object(s.jsx)("img",{src:j,height:"400px"}),!1===this.state.submitted&&Object(s.jsx)("form",{onSubmit:this.submitHandler,children:Object(s.jsxs)("div",{className:"container",style:{margin:"auto",maxWidth:"250px",verticalAlign:"middle"},children:[Object(s.jsxs)("div",{style:{padding:"10px"},children:[Object(s.jsx)("label",{className:"p-2",children:"Enter OTP:"}),Object(s.jsx)("input",{id:"passcode",name:"passcode",className:"form-control p-2",onChange:this.handleKeydown,placeholder:"Enter OTP"})]}),Object(s.jsx)("div",{className:"form-group p-2",children:Object(s.jsx)("button",{className:"btn btn-primary submitButton",onClick:this.submitHandler,children:"Submit"})})]})}),!0===this.state.submitted&&!0===this.state.passcode_validation&&Object(s.jsx)("div",{children:Object(s.jsxs)("h3",{children:["Door Unlocked, Welcome ",this.state.visitor_name]})}),!0===this.state.submitted&&!1===this.state.passcode_validation&&Object(s.jsxs)("div",{children:[Object(s.jsxs)("h3",{children:["Invalid Passcode, ",this.state.visitor_name," "]}),Object(s.jsx)("em",{children:"Try Again Or Request A New One"}),Object(s.jsx)("button",{className:"btn btn-danger",onClick:function(){return e.setState({submitted:!1})},children:"Try Again"})]})]})}}]),n}(a.Component),v=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(){var e;return Object(r.a)(this,n),(e=t.call(this)).handleKeydown=function(t){var n=t.target,s=n.name,a=n.value;"visitor_name"===s?e.setState({visitor_name:a},(function(){return console.log(e.state)})):"visitor_phone"===s&&e.setState({visitor_phone:a},(function(){return console.log(e.state)}))},e.submitHandler=function(t){t.preventDefault(),e.state.approval_status="approved";var n=e.state,s=n.faceid,a=n.visitor_name,i=n.visitor_phone,o=n.approval_status;p.a.post("https://f3gii3hkr3.execute-api.us-east-1.amazonaws.com/Dev/visitors",{faceid:s,approval_status:o,visitor_name:a,phone_number:i}).then((function(){return e.setState({submitted:!0})}))},e.handleReject=function(t){t.preventDefault(),e.state.approval_status="denied";var n=e.state,s=n.approval_status,a=n.faceid;p.a.post("https://f3gii3hkr3.execute-api.us-east-1.amazonaws.com/Dev/visitors",{faceid:a,approval_status:s}).then((function(){return e.setState({submitted:!0})}))},e.state={submitted:!1,faceid:null,visitor_name:null,visitor_phone:null,approval_status:null},e.submitHandler=e.submitHandler.bind(Object(h.a)(e)),e.handleKeydown=e.handleKeydown.bind(Object(h.a)(e)),e.handleReject=e.handleReject.bind(Object(h.a)(e)),e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){console.log("Input Form Mounted!")}},{key:"render",value:function(){var e=this.props.location.search.slice(1).split(/[=&]/),t=e[1],n=e[3];this.state.faceid=t;var a=this.state,i=a.visitor_name,o=a.visitor_phone,c=a.submitted,r=a.approval_status;return Object(s.jsxs)("div",{children:[Object(s.jsx)("img",{src:n,width:"400"}),!1===c&&Object(s.jsxs)("form",{onSubmit:this.submitHandler,children:[Object(s.jsxs)("div",{className:"form-group",children:[Object(s.jsx)("label",{children:"Visitor Name"}),Object(s.jsx)("input",{id:"name",name:"visitor_name",className:"form-control",onChange:this.handleKeydown,placeholder:"Enter Full Name",style:{margin:"auto"}})]}),Object(s.jsxs)("div",{className:"form-group",children:[Object(s.jsx)("label",{children:"Visitor Phone Number"}),Object(s.jsx)("input",{id:"phone",name:"visitor_phone",className:"form-control",onChange:this.handleKeydown,placeholder:"Enter Phone Number"})]}),Object(s.jsxs)("div",{className:"form-group",children:[i&&i.length>6&&o&&o.length>=10&&Object(s.jsx)("button",{className:"btn btn-success",onClick:this.submitHandler,children:"Approve Visitor & Submit"}),(!i||i.length<6||!o||o.length<10)&&Object(s.jsxs)("div",{children:[Object(s.jsx)("button",{className:"btn btn-dark",disabled:!0,children:"Approve Visitor & Submit"}),Object(s.jsx)("label",{children:"Input Length Too Short"})]}),Object(s.jsx)("div",{children:Object(s.jsx)("button",{className:"btn btn-danger",onClick:this.handleReject,children:"Reject Visitor"})})]})]}),!0===c&&"approved"===r&&Object(s.jsx)("div",{children:Object(s.jsx)("h3",{children:"Successfully Created Visitor & Sent OTP!"})}),!0===c&&"denied"===r&&Object(s.jsx)("div",{children:Object(s.jsx)("h3",{children:"Rejected User"})})]})}}]),n}(a.Component),O=n(35),f=n(3),x=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"componentDidMount",value:function(){console.log("Mounted!")}},{key:"render",value:function(){return console.log(this.props),Object(s.jsxs)("div",{className:"App",children:[Object(s.jsx)("header",{className:"App-header"}),Object(s.jsxs)(O.a,{children:[Object(s.jsx)(f.a,{path:"/passcode",component:m}),Object(s.jsx)(f.a,{path:"/visitors/new",component:v})]})]})}}]),n}(a.Component),g=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,66)).then((function(t){var n=t.getCLS,s=t.getFID,a=t.getFCP,i=t.getLCP,o=t.getTTFB;n(e),s(e),a(e),i(e),o(e)}))};c.a.render(Object(s.jsx)(i.a.StrictMode,{children:Object(s.jsx)(x,{})}),document.getElementById("root")),g()}},[[65,1,2]]]);
//# sourceMappingURL=main.324cc9e0.chunk.js.map